(this.webpackJsonpviews=this.webpackJsonpviews||[]).push([[0],{28:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),c=n(20),r=n.n(c),l=(n(28),n(3)),i=n(5),o=n(12),d=n(15),u=n(4),b=n.n(u),j=n(6),x=n(13),m=function(){localStorage.setItem("authToken",""),localStorage.setItem("refreshToken","")},h=function(){var e=localStorage.getItem("authToken"),t=localStorage.getItem("refreshToken");if(!e||!t)return!1;try{if(Object(x.a)(t).exp<(new Date).getTime()/1e3)return m(),!1}catch(n){return!1}return!0},p=function(){try{if(h()){var e=localStorage.getItem("authToken");return Object(x.a)(e).username}return"anonymous user"}catch(t){return"anonymous user"}},g=function(){try{if(h()){var e=localStorage.getItem("authToken");return Object(x.a)(e).id}return!1}catch(t){return!1}},O=function(){try{if(h()){var e=localStorage.getItem("authToken");return"admin"===Object(x.a)(e).role}return!1}catch(t){return!1}},v=function(){var e=Object(j.a)(b.a.mark((function e(){var t,n,a,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=localStorage.getItem("authToken"),n=localStorage.getItem("refreshToken"),t&&n){e.next=5;break}return e.abrupt("return",!1);case 5:if(!(Object(x.a)(t).exp<(new Date).getTime()/1e3)){e.next=15;break}return console.log("going to refresh token"),e.next=10,fetch("/auth/token",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({token:n})});case 10:return a=e.sent,e.next=13,a.json();case 13:s=e.sent,200===a.status?(localStorage.setItem("authToken",s.authToken),localStorage.setItem("refreshToken",s.refreshToken)):alert("your refresh token is expired, please log in again!");case 15:return e.abrupt("return","Bearer ".concat(localStorage.getItem("authToken")));case 18:return e.prev=18,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}(),f=n(0),w=["component"];function N(e){var t=e.component,n=Object(d.a)(e,w);return Object(f.jsx)(i.b,Object(o.a)(Object(o.a)({},n),{},{render:function(e){return h()?Object(f.jsx)(t,Object(o.a)({},e)):Object(f.jsx)(i.a,{to:{pathname:"/login"}})}}))}var y=["component"];function B(e){var t=e.component,n=Object(d.a)(e,y);return Object(f.jsx)(i.b,Object(o.a)(Object(o.a)({},n),{},{render:function(e){return O()?Object(f.jsx)(t,Object(o.a)({},e)):Object(f.jsx)(i.a,{to:{pathname:"/"}})}}))}var k=n(2);function S(){var e=Object(i.g)(),t=Object(a.useRef)(),n=Object(a.useRef)(),s=function(){var t=Object(j.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:m(),e.push("/login");case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"py-6 px-8 flex justify-between bg-primaryBg md:bg-transparent",children:[Object(f.jsx)("input",{id:"menu",name:"menu",ref:n,onChange:function(e){e.target.checked?t.current.className=t.current.className.replace("hidden","grid"):t.current.className=t.current.className.replace("grid","hidden")},type:"checkbox",hidden:!0}),Object(f.jsx)("label",{className:"block lg:hidden z-10",htmlFor:"menu",children:"\ud83c\udf1f"}),Object(f.jsxs)("div",{ref:t,className:"absolute w-screen left-0 top-30 hidden gap-4 place-content-center pb-4 shadow-lg lg:shadow-none md:pb-0 lg:static lg:flex md:space-x-2 lg:space-x-8 bg-primaryBg lg:bg-transparent",children:[Object(f.jsx)(l.b,{className:"w-navBtn text-center bg-navBtn shadow-nav rounded-sm text-white py-1",to:"/",children:"home"}),Object(f.jsx)(l.b,{className:"w-navBtn text-center bg-navBtn shadow-nav rounded-sm text-white py-1",to:"/blogs",children:"blogs"}),h()?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(l.b,{className:"w-navBtn text-center bg-navBtn shadow-nav rounded-sm text-white py-1",to:"/me",children:"profile"}),Object(f.jsx)(l.b,{className:"w-navBtn text-center bg-navBtn shadow-nav rounded-sm text-white py-1",to:"/post",children:"post"}),O()?Object(f.jsx)(l.b,{className:"w-navBtn text-center bg-navBtn shadow-nav rounded-sm text-white py-1",to:"/admin",children:"admin"}):null]}):null,Object(f.jsx)(l.b,{className:"w-navBtn text-center bg-navBtn shadow-nav rounded-sm text-white py-1",to:"/about",children:"about"}),h()?Object(f.jsx)("button",{onClick:s,className:"w-navBtn text-center bg-navBtn shadow-nav rounded-sm text-white py-1",children:"logout"}):Object(f.jsx)(l.b,{className:"w-navBtn text-center bg-navBtn shadow-nav rounded-sm text-white py-1",to:"/login",children:"login"})]})]})}function T(e){return Object(f.jsxs)("div",{className:"w-60 overflow-hidden rounded-md m-auto",children:[Object(f.jsx)("div",{className:"w-full bg-white",children:Object(f.jsx)("img",{className:"h-32 m-auto",src:e.thumbnail,alt:"img"})}),Object(f.jsxs)("div",{className:"px-3 py-2 space-y-2 bg-purpleBg text-white",children:[Object(f.jsx)("h1",{className:"text-center",children:e.title}),Object(f.jsx)("p",{className:"text-xs text-justify h-12 overflow-ellipsis overflow-hidden",children:e.description}),Object(f.jsxs)(l.b,{className:"flex align-middle justify-center px-2 text-xs border border-white w-14",to:"/blog/".concat(e.id),children:[Object(f.jsx)("span",{className:"mr-1",children:"visit"})," ",Object(f.jsx)("img",{width:"10px",height:"10px",src:"/ext-link.svg",alt:"external link"})]})]})]})}function P(){var e=Object(a.useState)(null),t=Object(k.a)(e,2),n=t[0],s=t[1];return Object(a.useEffect)((function(){fetch("/api/blogs/latest").then((function(e){return e.json()})).then((function(e){return e.success?s(e.blog):null}))}),[]),Object(f.jsxs)("div",{className:"min-h-screen bg-primaryBg",children:[Object(f.jsx)(S,{}),h()?null:Object(f.jsxs)("h1",{className:"px-3 mt-8 text-center text-2xl text-navBtn",children:["Hello visitor, please ",Object(f.jsx)(l.b,{className:"text-secondaryBg underline",to:"/login",children:"login"})," to view and posts Blogs"]}),Object(f.jsxs)("div",{className:"grid gap-20 md:flex w-100 h-full mt-32 md:my-32",children:[Object(f.jsx)("div",{className:"flex-1 h-3/4 grid place-content-center",children:Object(f.jsxs)("div",{className:"space-y-3",children:[Object(f.jsx)("h1",{className:"font-mono text-3xl text-center",children:"Latest"}),n?Object(f.jsx)(T,{title:n.title,id:n._id,description:n.description,thumbnail:n.thumbnail}):"Please wait, Loading"]})}),Object(f.jsx)("div",{className:"flex-1 h-1/2 md:h-3/4 grid place-content-center",children:Object(f.jsx)("img",{className:"md:w-80 w-64",src:"/main-cover.svg",alt:"big svg"})})]})]})}function I(e){var t=e.match.params.id,n=Object(a.useState)([]),s=Object(k.a)(n,2),c=s[0],r=s[1],l=Object(a.useState)(!0),i=Object(k.a)(l,2),o=i[0],d=i[1],u=Object(a.useState)(!1),x=Object(k.a)(u,2),m=x[0],h=x[1];return Object(a.useEffect)((function(){var e=t||g();(function(){var t=Object(j.a)(b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v();case 2:n=t.sent,fetch("/api/blogs",{method:"POST",headers:{"content-type":"application/json",authorization:n},body:JSON.stringify({userId:e})}).then((function(e){return e.json()})).then((function(e){e.success?(0===e.blogs.length?h(!0):d(!1),r(e.blogs)):h(!0)}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[t]),Object(f.jsxs)("div",{className:"min-h-screen w-screen bg-primaryBg pb-24 md:pb-0",children:[Object(f.jsx)(S,{}),Object(f.jsxs)("div",{className:"grid place-content-center sm:my-16 md:my-0",children:[t?null:Object(f.jsxs)("div",{className:"h-44 my-4 space-y-2",children:[Object(f.jsxs)("div",{className:"flex space-x-4 text-xl text-navBtn",children:[Object(f.jsx)("h1",{children:"username:"}),Object(f.jsx)("p",{children:p()})]}),Object(f.jsxs)("div",{className:"flex space-x-4 text-xl text-navBtn",children:[Object(f.jsx)("h1",{children:"Role:"}),Object(f.jsx)("p",{children:O()?"admin":"user"})]})]}),Object(f.jsxs)("div",{className:"mb-6",children:[Object(f.jsx)("h1",{className:"text-2xl text-navBtn",children:"Your Blogs"}),Object(f.jsx)("p",{className:"text-md",children:"your public as well as private blogs are here"})]}),Object(f.jsx)("div",{className:"grid gap-5 md:gap-8 sm:grid-cols-2 lg:grid-cols-3 md:align-middle lg:gap-5",children:o?m?Object(f.jsx)("h1",{className:"p-10 text-center text-4xl text-navBtn",children:" Blog not found"}):Object(f.jsx)("h1",{className:"p-10 text-center text-4xl text-navBtn",children:"Loading, Please wait!"}):c.map((function(e,t){return Object(f.jsx)(T,{title:e.title,description:e.description,id:e._id,thumbnail:e.thumbnail},t)}))})]})]})}var C=n(22),q=n.n(C),E=n(23),L=n.n(E);function D(e){var t=Object(i.g)(),n=e.id,s=Object(a.useState)(!1),c=Object(k.a)(s,2),r=c[0],l=c[1],o=function(){var e=Object(j.a)(b.a.mark((function e(){var a,s,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("are you sure? There's no coming back!")){e.next=3;break}return l(!1),e.abrupt("return");case 3:return e.prev=3,e.next=6,v();case 6:return a=e.sent,l(!0),e.next=10,fetch("/api/blog/".concat(n,"/"),{method:"DELETE",headers:{"content-type":"application/json",authorization:a}});case 10:return s=e.sent,e.next=13,s.json();case 13:c=e.sent,200===s.status?(console.log(c),t.push("/me")):401!==s.status&&403!==s.status||(alert(c.error),l(!1)),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(3),console.log(e.t0),l(!1);case 21:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"m-auto w-full sm:w-1/2 py-2 px-4 lg:w-auto border-4 border-navBtn rounded-md",children:[Object(f.jsx)("h1",{className:"text-navBtn text-center",children:"ACTIONS"}),Object(f.jsxs)("div",{className:"flex mt-4 justify-center space-x-4",children:[g()===e.userId?Object(f.jsx)("button",{disabled:r,onClick:function(){t.push("/blog/".concat(n,"/edit"))},className:"px-4 py-0.5 w-min text-center bg-navBtn rounded-md text-white border-2 border-navBtn hover:bg-secondaryBg hover:text-navBtn",children:"edit"}):null,O()||g()===e.userId?Object(f.jsx)("button",{disabled:r,onClick:o,className:"px-4 py-0.5 w-min text-center bg-navBtn rounded-md text-white border-2 border-navBtn hover:bg-secondaryBg hover:text-navBtn",children:"delete"}):null,Object(f.jsx)("button",{disabled:r,onClick:function(){alert("feature not available yet")},className:"px-4 py-0.5 w-min text-center bg-navBtn rounded-md text-white border-2 border-navBtn hover:bg-secondaryBg hover:text-navBtn",children:"share"})]})]})}function J(e){var t=e.match.params.id,n=Object(a.useState)(""),s=Object(k.a)(n,2),c=s[0],r=s[1],i=Object(a.useState)(""),o=Object(k.a)(i,2),d=o[0],u=o[1],x=Object(a.useState)(""),m=Object(k.a)(x,2),h=m[0],p=m[1],g=Object(a.useState)(""),O=Object(k.a)(g,2),w=O[0],N=O[1],y=Object(a.useState)(!0),B=Object(k.a)(y,2),S=B[0],T=B[1],P=Object(a.useState)(!1),I=Object(k.a)(P,2),C=I[0],E=I[1];return Object(a.useEffect)((function(){(function(){var e=Object(j.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:n=e.sent,fetch("/api/blog/".concat(t),{method:"GET",headers:{authorization:n}}).then((function(e){return e.json()})).then((function(e){if(e.success){r(e.blog.title),u(e.blog.description);var t=q()(e.blog.content),n=L.a.sanitize(t);p(n),N(e.blog.userId),T(!1)}else E(!0)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(f.jsxs)("div",{className:"min-h-screen bg-secondaryBg",children:[Object(f.jsx)("div",{className:"p-8",children:Object(f.jsxs)(l.b,{className:"flex align-middle justify-center rounded-sm w-min px-2 border-2 border-navBtn text-navBtn",to:"/blogs",children:[" ",Object(f.jsx)("div",{className:"w-5 mr-2 my-auto",children:Object(f.jsx)("img",{className:"w-full",src:"/back.png",alt:"back"})})," back"]})}),S?C?Object(f.jsx)("h1",{className:"p-10 text-center text-4xl text-navBtn",children:" Blog not found"}):Object(f.jsx)("h1",{className:"p-10 text-center text-4xl text-navBtn",children:"Loading, Please wait!"}):Object(f.jsxs)("div",{id:"blog",className:"lg:flex p-2",children:[Object(f.jsxs)("div",{id:"main",className:"h-auto w-100 lg:w-2/3 py-2 px-4 lg:h-auto min-h-full overflow-hidden",children:[Object(f.jsx)("h1",{className:"text-2xl min-h-96 text-center underline text-white",children:c}),Object(f.jsx)("p",{className:"text-gray-200 border-l-2 my-6 pl-4",children:d}),Object(f.jsx)("iframe",{className:"h-96 w-full",title:"markdown",id:"markdown",srcDoc:h})]}),Object(f.jsx)("div",{id:"menu",className:"h-auto w-100 lg:h-auto lg:w-1/3 min-h-full mt-8 lg:mt-0 sm:px-6 md:space-y-4 lg:block flex space-x-4",children:Object(f.jsx)(D,{userId:w,id:t})})]})]})}function z(){var e=Object(i.g)(),t=Object(a.useState)(""),n=Object(k.a)(t,2),s=n[0],c=n[1],r=Object(a.useState)(""),o=Object(k.a)(r,2),d=o[0],u=o[1],x=Object(a.useState)(""),m=Object(k.a)(x,2),h=m[0],p=m[1],g=Object(a.useState)("https://via.placeholder.com/600x150?text=edit this"),O=Object(k.a)(g,2),w=O[0],N=O[1],y=Object(a.useState)(!0),B=Object(k.a)(y,2),S=B[0],T=B[1],P=Object(a.useState)(!1),I=Object(k.a)(P,2),C=I[0],q=I[1],E=function(){var t=Object(j.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),q(!0),t.next=4,v();case 4:a=t.sent,fetch("/api/post",{method:"POST",headers:{"content-type":"application/json",authorization:a},body:JSON.stringify({title:s,description:d,content:h,isPublic:S,thumbnail:w})}).then((function(e){return e.json()})).then((function(t){if(t.success){var n=t.blog[0]._id;e.push("/blog/".concat(n))}else alert(t.error)}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"min-h-screen  px-4 pb-8  bg-primaryBg grid place-content-center",children:[Object(f.jsx)("div",{className:"py-8 px-3 md:px-10",children:Object(f.jsxs)(l.b,{className:"flex align-middle justify-center rounded-sm w-min px-2 border-2 border-navBtn text-navBtn",to:"/blogs",children:[" ",Object(f.jsx)("div",{className:"w-5 mr-2 my-auto",children:Object(f.jsx)("img",{className:"w-full",src:"/back.png",alt:"back"})})," back"]})}),Object(f.jsxs)("form",{onSubmit:E,method:"POST",action:"/api/post",className:"w-screen px-3 md:px-10 m-auto space-y-4",children:[Object(f.jsx)("img",{className:"w-full",src:w,alt:"thumbnail"}),Object(f.jsx)("h1",{className:"text-3xl text-navBtn",children:"Post"}),Object(f.jsx)("input",{value:s,onChange:function(e){return c(e.target.value)},className:"w-full p-2",type:"text",name:"title",placeholder:"title",required:!0}),Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{placeholder:"thumbnail image",type:"url",value:w,onChange:function(e){return N(e.target.value)},className:"w-full p-2"}),Object(f.jsx)("p",{className:"text-xs text-gray-500",children:"URL to thumbnail image for your blog"})]}),Object(f.jsxs)("div",{className:"w-56 flex justify-between align-baseline",children:[Object(f.jsx)("label",{htmlFor:"isPublic",children:"publicily visible"}),Object(f.jsx)("input",{id:"isPublic",type:"checkbox",defaultChecked:S,onChange:function(e){return T(e.target.checked)}})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("textarea",{value:d,onChange:function(e){return u(e.target.value)},className:"w-full h-32 p-2",name:"description",placeholder:"description",required:!0}),Object(f.jsx)("p",{className:"text-xs text-gray-500",children:"Doesn't support markdown"})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("textarea",{value:h,onChange:function(e){return p(e.target.value)},className:"w-full h-72 p-2",name:"content",placeholder:"blog goes here",required:!0}),Object(f.jsx)("p",{className:"text-xs text-gray-500",children:"This section support some elements of markdown."})]}),Object(f.jsx)("button",{disabled:C,type:"submit",className:"w-min px-3 py-0.5 border-2 border-navBtn rounded-sm hover:bg-navBtn hover:text-white",children:"post"})]})]})}function R(){var e=Object(a.useState)([]),t=Object(k.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(!0),r=Object(k.a)(c,2),i=r[0],o=r[1];return Object(a.useEffect)((function(){fetch("/api/blogs").then((function(e){return e.json()})).then((function(e){e.success&&(s(e.blogs),o(!1))}))}),[]),Object(f.jsxs)("div",{className:"md:min-h-screen w-screen bg-primaryBg pb-24 md:pb-0",children:[Object(f.jsx)("div",{className:"p-4",children:Object(f.jsxs)(l.b,{className:"flex align-middle justify-center rounded-sm w-min px-2 border-2 border-navBtn text-navBtn",to:"/",children:[" ",Object(f.jsx)("div",{className:"w-5 mr-2 my-auto",children:Object(f.jsx)("img",{className:"w-full",src:"/back.png",alt:"back"})})," back"]})}),Object(f.jsx)("div",{className:"grid place-content-center min-h-screen my-16 md:my-0",children:Object(f.jsx)("div",{className:"grid gap-5 md:gap-8 sm:grid-cols-2 lg:grid-cols-3 md:align-middle lg:gap-5",children:i?Object(f.jsx)("h1",{className:"text-navBtn text-2xl text-center",children:"please wait"}):n.map((function(e,t){return Object(f.jsx)(T,{title:e.title,description:e.description,id:e._id,thumbnail:e.thumbnail},t)}))})})]})}function _(e){var t=e.match.params.id,n=Object(i.g)(),s=Object(a.useState)(""),c=Object(k.a)(s,2),r=c[0],o=c[1],d=Object(a.useState)(""),u=Object(k.a)(d,2),x=u[0],m=u[1],h=Object(a.useState)(""),p=Object(k.a)(h,2),g=p[0],O=p[1],w=Object(a.useState)(""),N=Object(k.a)(w,2),y=N[0],B=N[1],S=Object(a.useState)(!0),T=Object(k.a)(S,2),P=T[0],I=T[1],C=Object(a.useState)(!0),q=Object(k.a)(C,2),E=q[0],L=q[1],D=Object(a.useState)(!1),J=Object(k.a)(D,2),z=J[0],R=J[1];Object(a.useEffect)((function(){(function(){var e=Object(j.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:n=e.sent,fetch("/api/blog/".concat(t),{method:"GET",headers:{authorization:n}}).then((function(e){return e.json()})).then((function(e){e.success?(L(!1),o(e.blog.title),m(e.blog.description),O(e.blog.content),I(e.blog.isPublic),e.blog.thumbnail?B(e.blog.thumbnail):B("https://via.placeholder.com/600x200?text=edit this")):R(!0)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]);var _=function(){var e=Object(j.a)(b.a.mark((function e(a){var s,c,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(!0),a.preventDefault(),e.prev=2,e.next=5,v();case 5:return s=e.sent,e.next=8,fetch("/api/blog/".concat(t),{method:"PATCH",headers:{"content-type":"application/json",authorization:s},body:JSON.stringify({title:r,description:x,content:g,isPublic:P,thumbnail:y})});case 8:return c=e.sent,e.next=11,c.json();case 11:l=e.sent,200===c.status?n.push("/blog/".concat(t)):401!==c.status&&403!==c.status||(alert(l.error),L(!1)),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),console.log(e.t0),L(!1);case 19:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"min-h-screen px-4 pb-8 bg-primaryBg grid place-content-center",children:[Object(f.jsx)("div",{className:"py-8 px-3 md:px-10",children:Object(f.jsxs)(l.b,{"aria-disabled":E,className:"flex align-middle justify-center rounded-sm w-min px-2 border-2 border-navBtn text-navBtn",to:z?"/":"/blog/".concat(t),children:[" ",Object(f.jsx)("div",{className:"w-5 mr-2 my-auto",children:Object(f.jsx)("img",{className:"w-full",src:"/back.png",alt:"back"})})," back"]})}),E?z?Object(f.jsx)("h1",{className:"p-10 text-center text-4xl text-navBtn",children:" Blog not found"}):Object(f.jsx)("h1",{className:"p-10 text-center text-4xl text-navBtn",children:"Loading, Please wait!"}):Object(f.jsxs)("form",{onSubmit:_,method:"POST",action:"/api/post",className:"w-screen px-3 md:px-10 m-auto space-y-4",children:[Object(f.jsx)("img",{className:"w-full",src:y,alt:"thumbnail"}),Object(f.jsx)("h1",{className:"text-3xl text-navBtn",children:"Edit"}),Object(f.jsx)("input",{value:r,onChange:function(e){return o(e.target.value)},className:"w-full p-2",type:"text",name:"title",placeholder:"title",required:!0}),Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{placeholder:"thumbnail image",type:"url",value:y,onChange:function(e){return B(e.target.value)},className:"w-full p-2"}),Object(f.jsx)("p",{className:"text-xs text-gray-500",children:"URL to thumbnail image for your blog"})]}),Object(f.jsxs)("div",{className:"w-56 flex justify-between align-baseline",children:[Object(f.jsx)("label",{htmlFor:"isPublic",children:"publicily visible"}),Object(f.jsx)("input",{id:"isPublic",type:"checkbox",defaultChecked:P,onChange:function(e){return I(e.target.checked)}})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("textarea",{value:x,onChange:function(e){return m(e.target.value)},className:"w-full h-32 p-2",name:"description",placeholder:"description",required:!0}),Object(f.jsx)("p",{className:"text-xs text-gray-500",children:"Doesn't support markdown"})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("textarea",{value:g,onChange:function(e){return O(e.target.value)},className:"w-full h-72 p-2",name:"content",placeholder:"blog goes here",required:!0}),Object(f.jsx)("p",{className:"text-xs text-gray-500",children:"This section support some elements of markdown."})]}),Object(f.jsx)("button",{disabled:E,type:"submit",className:"w-min px-3 py-0.5 border-2 border-navBtn rounded-sm hover:bg-navBtn hover:text-white",children:"update"})]})]})}function F(){var e=Object(i.g)(),t=function(){var t=Object(j.a)(b.a.mark((function t(n){var a,s,c,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a=n.target.username.value,s=n.target.password.value,t.prev=3,t.next=6,fetch(n.target.action,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:a,password:s})});case 6:return c=t.sent,t.next=9,c.json();case 9:r=t.sent,200===c.status?(localStorage.setItem("authToken",r.authToken),localStorage.setItem("refreshToken",r.refreshToken),e.push("/")):alert(r.error),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[3,13]])})));return function(e){return t.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"min-h-screen  px-4 pb-8  bg-primaryBg grid place-content-center",children:[Object(f.jsx)("div",{className:"py-8 px-3 md:px-10",children:Object(f.jsxs)(l.b,{className:"flex align-middle justify-center rounded-sm w-min px-2 border-2 border-navBtn text-navBtn",to:"/",children:[" ",Object(f.jsx)("div",{className:"w-5 mr-2 my-auto",children:Object(f.jsx)("img",{className:"w-full",src:"/back.png",alt:"back"})})," back"]})}),Object(f.jsxs)("form",{onSubmit:t,method:"POST",action:"/auth/login",className:"md:w-96 m-auto space-y-4 px-3 md:px-10",children:[Object(f.jsx)("h1",{className:"text-2xl text-navBtn",children:"Login"}),Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{className:"w-full p-2",type:"text",name:"username",placeholder:"username",required:!0}),Object(f.jsx)("p",{className:"text-xs text-gray-500",children:"username must be unique"})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{type:"password",className:"w-full p-2",name:"password",placeholder:"password",required:!0}),Object(f.jsx)("p",{className:"text-xs text-gray-500",children:"make sure to choose a strong password"})]}),Object(f.jsxs)("div",{className:"flex justify-between align-middle",children:[Object(f.jsx)("button",{type:"submit",className:"w-26 text-center px-3 py-0.5 border-2 border-navBtn rounded-sm hover:bg-navBtn hover:text-white",children:"log in"}),Object(f.jsx)(l.b,{to:"/signup",children:"create account"})]})]})]})}function A(){var e=Object(i.g)(),t=function(){var t=Object(j.a)(b.a.mark((function t(n){var a,s,c,r,l;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a=n.target.username.value,s=n.target.password.value,c=n.target.confPassword.value,t.prev=4,t.next=7,fetch(n.target.action,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:a,password:s,confPassword:c})});case 7:if(201!==(r=t.sent).status){t.next=12;break}e.push("/login"),t.next=17;break;case 12:if(401!==r.status){t.next=17;break}return t.next=15,r.json();case 15:l=t.sent,alert(l.error);case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(4),alert(t.t0);case 22:case"end":return t.stop()}}),t,null,[[4,19]])})));return function(e){return t.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"min-h-screen  px-4 pb-8  bg-primaryBg grid place-content-center",children:[Object(f.jsx)("div",{className:"py-8 px-3 md:px-10",children:Object(f.jsxs)(l.b,{className:"flex align-middle justify-center rounded-sm w-min px-2 border-2 border-navBtn text-navBtn",to:"/",children:[" ",Object(f.jsx)("div",{className:"w-5 mr-2 my-auto",children:Object(f.jsx)("img",{className:"w-full",src:"/back.png",alt:"back"})})," back"]})}),Object(f.jsxs)("form",{onSubmit:t,method:"POST",action:"/auth/signup",className:"md:w-96 m-auto space-y-4 px-3 md:px-10",children:[Object(f.jsx)("h1",{className:"text-2xl text-navBtn",children:"Signup"}),Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{className:"w-full p-2",type:"text",name:"username",placeholder:"username",required:!0}),Object(f.jsx)("p",{className:"text-xs text-gray-500",children:"username must be unique"})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{type:"password",className:"w-full p-2",name:"password",placeholder:"password",required:!0}),Object(f.jsx)("p",{className:"text-xs text-gray-500",children:"make sure to choose a strong password"})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{type:"password",className:"w-full p-2",name:"confPassword",placeholder:"password",required:!0}),Object(f.jsx)("p",{className:"text-xs text-gray-500",children:"re-enter the password"})]}),Object(f.jsx)("button",{type:"submit",className:"w-26 text-center px-3 py-0.5 border-2 border-navBtn rounded-sm hover:bg-navBtn hover:text-white",children:"sign up"})]})]})}function U(){return Object(f.jsxs)("div",{className:"min-h-screen bg-primaryBg",children:[Object(f.jsx)(S,{}),Object(f.jsxs)("div",{className:"py-20 px-5",children:[Object(f.jsx)("h1",{className:"text-center text-2xl text-navBtn",children:"This app is all about learning."}),Object(f.jsxs)("div",{className:"py-4 text-center text-md font-mono",children:[Object(f.jsx)("p",{children:"currently JWT and how to implement it!"}),Object(f.jsx)("p",{children:"Also React and user persistence via JWT on client-side"})]})]})]})}function G(e){return Object(f.jsxs)("div",{className:"w-60 overflow-hidden rounded-md m-auto",children:[Object(f.jsx)("div",{className:"w-full bg-white",children:Object(f.jsx)("img",{className:"h-28 m-auto",src:e.thumbnail,alt:"img"})}),Object(f.jsxs)("div",{className:"px-3 py-2 bg-purpleBg text-white",children:[Object(f.jsxs)("p",{className:"text-xs text-justify h-6 overflow-ellipsis overflow-hidden",children:["username: ",e.username]}),Object(f.jsxs)("p",{className:"text-xs text-justify h-6 overflow-ellipsis overflow-hidden",children:["role: ",e.role]}),Object(f.jsxs)(l.b,{className:"flex align-middle justify-center px-2 text-xs border border-white w-24 rounded-sm",to:"/user/".concat(e.id),children:[Object(f.jsx)("span",{className:"mr-1",children:"open user"})," ",Object(f.jsx)("img",{width:"10px",height:"10px",src:"/ext-link.svg",alt:"external link"})]})]})]})}function H(){var e=Object(a.useState)([]),t=Object(k.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(!0),r=Object(k.a)(c,2),l=r[0],i=r[1],o=Object(a.useState)(!1),d=Object(k.a)(o,2),u=d[0],x=d[1];return Object(a.useEffect)((function(){(function(){var e=Object(j.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=fetch,e.next=3,v();case 3:return e.t1=e.sent,e.t2={authorization:e.t1},e.t3={headers:e.t2},e.next=8,(0,e.t0)("/auth/users",e.t3);case 8:return t=e.sent,e.next=11,t.json();case 11:n=e.sent,200===t.status?n.success?n.users.length>0?(s(n.users),i(!1)):x(!0):(x(!0),alert(n.error)):(console.log(n),alert(n.error));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(f.jsxs)("div",{className:"min-h-screen w-screen bg-primaryBg pb-24 md:pb-0",children:[Object(f.jsx)(S,{}),Object(f.jsxs)("div",{className:"grid place-content-center sm:my-16 md:my-0",children:[Object(f.jsxs)("div",{className:"my-6 px-4",children:[Object(f.jsx)("h1",{className:"text-2xl text-navBtn",children:"List of all Users"}),Object(f.jsx)("p",{className:"text-md",children:"you can visit each user's profile and view their public or private posts."})]}),Object(f.jsx)("div",{className:"grid gap-5 md:gap-8 sm:grid-cols-2 lg:grid-cols-3 md:align-middle lg:gap-5",children:l?u?Object(f.jsx)("h1",{className:"p-10 text-center text-4xl text-navBtn",children:"no users found"}):Object(f.jsx)("h1",{className:"p-10 text-center text-4xl text-navBtn",children:"Loading, Please wait!"}):n.map((function(e,t){return Object(f.jsx)(G,{username:e.username,role:e.role,id:e._id,thumbnail:"https://via.placeholder.com/600x200?text=".concat(e.username)},t)}))})]})]})}var W=function(){return Object(f.jsx)("div",{className:"container min-h-scree min-w-full",children:Object(f.jsx)(l.a,{children:Object(f.jsxs)(i.d,{children:[Object(f.jsx)(i.b,{exact:!0,path:"/",component:P}),Object(f.jsx)(i.b,{exact:!0,path:"/login",component:F}),Object(f.jsx)(i.b,{exact:!0,path:"/signup",component:A}),Object(f.jsx)(i.b,{exact:!0,path:"/blogs",component:R}),Object(f.jsx)(i.b,{exact:!0,path:"/about",component:U}),Object(f.jsx)(N,{exact:!0,path:"/me",component:I}),Object(f.jsx)(N,{exact:!0,path:"/post",component:z}),Object(f.jsx)(N,{exact:!0,path:"/blog/:id",component:J}),Object(f.jsx)(N,{exact:!0,path:"/blog/:id/edit",component:_}),Object(f.jsx)(B,{exact:!0,path:"/admin",component:H}),Object(f.jsx)(B,{exact:!0,path:"/user/:id",component:I})]})})})};r.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(W,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.07c24402.chunk.js.map