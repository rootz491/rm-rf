(this.webpackJsonpviews=this.webpackJsonpviews||[]).push([[0],{28:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),c=n(20),r=n.n(c),l=(n(28),n(3)),i=n(5),o=n(13),d=n(15),u=n(11),b=function(){localStorage.setItem("authToken",""),localStorage.setItem("refreshToken","")},j=function(){var e=localStorage.getItem("authToken"),t=localStorage.getItem("refreshToken");if(!e||!t)return!1;try{if(Object(u.a)(t).exp<(new Date).getTime()/1e3)return b(),!1}catch(n){return!1}return!0},x=n(0),m=["component"];function h(e){var t=e.component,n=Object(d.a)(e,m),a=j();return Object(x.jsx)(i.b,Object(o.a)(Object(o.a)({},n),{},{render:function(e){return a?Object(x.jsx)(t,Object(o.a)({},e)):Object(x.jsx)(i.a,{to:{pathname:"/login"}})}}))}var p=function(){var e=j();try{if(e){var t=localStorage.getItem("authToken");return"admin"===Object(u.a)(t).role}return!1}catch(n){return!1}},O=["component"];function g(e){var t=e.component,n=Object(d.a)(e,O),a=p();return Object(x.jsx)(i.b,Object(o.a)(Object(o.a)({},n),{},{render:function(e){return a?Object(x.jsx)(t,Object(o.a)({},e)):Object(x.jsx)(i.a,{to:{pathname:"/"}})}}))}var v=n(2),f=n(4),w=n.n(f),N=n(6);function y(){var e=Object(i.g)(),t=Object(a.useRef)(),n=Object(a.useRef)(),s=p(),c=j(),r=function(){var t=Object(N.a)(w.a.mark((function t(){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("adios"),b(),e.push("/login");case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"py-6 px-8 flex justify-between bg-primaryBg md:bg-transparent",children:[Object(x.jsx)("input",{id:"menu",name:"menu",ref:n,onChange:function(e){e.target.checked?t.current.className=t.current.className.replace("hidden","grid"):t.current.className=t.current.className.replace("grid","hidden")},type:"checkbox",hidden:!0}),Object(x.jsx)("label",{className:"block lg:hidden z-10",htmlFor:"menu",children:"\ud83c\udf1f"}),Object(x.jsxs)("div",{ref:t,className:"absolute w-screen left-0 top-30 hidden gap-4 place-content-center pb-4 shadow-lg lg:shadow-none md:pb-0 lg:static lg:flex md:space-x-2 lg:space-x-8 bg-primaryBg lg:bg-transparent",children:[Object(x.jsx)(l.b,{className:"w-navBtn text-center bg-navBtn shadow-nav rounded-sm text-white py-1",to:"/",children:"home"}),Object(x.jsx)(l.b,{className:"w-navBtn text-center bg-navBtn shadow-nav rounded-sm text-white py-1",to:"/blogs",children:"blogs"}),c?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(l.b,{className:"w-navBtn text-center bg-navBtn shadow-nav rounded-sm text-white py-1",to:"/me",children:"profile"}),Object(x.jsx)(l.b,{className:"w-navBtn text-center bg-navBtn shadow-nav rounded-sm text-white py-1",to:"/post",children:"post"}),s?Object(x.jsx)(l.b,{className:"w-navBtn text-center bg-navBtn shadow-nav rounded-sm text-white py-1",to:"/admin",children:"admin"}):null]}):null,Object(x.jsx)(l.b,{className:"w-navBtn text-center bg-navBtn shadow-nav rounded-sm text-white py-1",to:"/about",children:"about"}),c?Object(x.jsx)("button",{onClick:r,className:"w-navBtn text-center bg-navBtn shadow-nav rounded-sm text-white py-1",children:"logout"}):Object(x.jsx)(l.b,{className:"w-navBtn text-center bg-navBtn shadow-nav rounded-sm text-white py-1",to:"/login",children:"login"})]})]})}function B(e){return Object(x.jsxs)("div",{className:"w-60 overflow-hidden rounded-md m-auto",children:[Object(x.jsx)("div",{className:"w-full bg-white",children:Object(x.jsx)("img",{className:"h-32 m-auto",src:e.thumbnail,alt:"img"})}),Object(x.jsxs)("div",{className:"px-3 py-2 space-y-2 bg-purpleBg text-white",children:[Object(x.jsx)("h1",{className:"text-center",children:e.title}),Object(x.jsx)("p",{className:"text-xs text-justify h-12 overflow-ellipsis overflow-hidden",children:e.description}),Object(x.jsxs)(l.b,{className:"flex align-middle justify-center px-2 text-xs border border-white w-14",to:"/blog/".concat(e.id),children:[Object(x.jsx)("span",{className:"mr-1",children:"visit"})," ",Object(x.jsx)("img",{width:"10px",height:"10px",src:"/ext-link.svg",alt:"external link"})]})]})]})}function k(){var e=Object(a.useState)(null),t=Object(v.a)(e,2),n=t[0],s=t[1],c=j();return Object(a.useEffect)((function(){fetch("/api/blogs/latest").then((function(e){return e.json()})).then((function(e){return e.success?s(e.blog):null}))}),[]),Object(x.jsxs)("div",{className:"min-h-screen bg-primaryBg",children:[Object(x.jsx)(y,{}),c?null:Object(x.jsxs)("h1",{className:"px-3 mt-8 text-center text-2xl text-navBtn",children:["Hello visitor, please ",Object(x.jsx)(l.b,{className:"text-secondaryBg underline",to:"/login",children:"login"})," to view and posts Blogs"]}),Object(x.jsxs)("div",{className:"grid gap-20 md:flex w-100 h-full mt-32 md:my-32",children:[Object(x.jsx)("div",{className:"flex-1 h-3/4 grid place-content-center",children:Object(x.jsxs)("div",{className:"space-y-3",children:[Object(x.jsx)("h1",{className:"font-mono text-3xl text-center",children:"Latest"}),n?Object(x.jsx)(B,{title:n.title,id:n._id,description:n.description,thumbnail:n.thumbnail}):"Please wait, Loading"]})}),Object(x.jsx)("div",{className:"flex-1 h-1/2 md:h-3/4 grid place-content-center",children:Object(x.jsx)("img",{className:"md:w-80 w-64",src:"/main-cover.svg",alt:"big svg"})})]})]})}var S=function(){var e=j();try{if(e){var t=localStorage.getItem("authToken");return Object(u.a)(t).id}return!1}catch(n){return!1}},T=Object(N.a)(w.a.mark((function e(){var t,n,a,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=localStorage.getItem("authToken"),n=localStorage.getItem("refreshToken"),t&&n){e.next=5;break}return e.abrupt("return",!1);case 5:if(!(Object(u.a)(t).exp<(new Date).getTime()/1e3)){e.next=14;break}return e.next=9,fetch("/auth/token",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({token:n})});case 9:return a=e.sent,e.next=12,a.json();case 12:s=e.sent,200===a.status?(localStorage.setItem("authToken",s.authToken),localStorage.setItem("refreshToken",s.refreshToken)):alert("your refresh token is expired, please log in again!");case 14:return e.abrupt("return","Bearer ".concat(localStorage.getItem("authToken")));case 17:return e.prev=17,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 21:case"end":return e.stop()}}),e,null,[[0,17]])})));function P(e){var t=e.match.params.id,n=Object(a.useState)([]),s=Object(v.a)(n,2),c=s[0],r=s[1],l=Object(a.useState)(!0),i=Object(v.a)(l,2),o=i[0],d=i[1],b=Object(a.useState)(!1),m=Object(v.a)(b,2),h=m[0],O=m[1],g=T(),f=S(),k=function(){var e=j();try{if(e){var t=localStorage.getItem("authToken");return Object(u.a)(t).username}return"anonymous user"}catch(n){return"anonymous user"}}(),P=p();return Object(a.useEffect)((function(){var e=t||f;(function(){var t=Object(N.a)(w.a.mark((function t(){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=fetch,t.next=3,g;case 3:t.t1=t.sent,t.t2={"content-type":"application/json",authorization:t.t1},t.t3=JSON.stringify({userId:e}),t.t4={method:"POST",headers:t.t2,body:t.t3},(0,t.t0)("/api/blogs",t.t4).then((function(e){return e.json()})).then((function(e){e.success?(0===e.blogs.length?O(!0):d(!1),r(e.blogs)):O(!0)}));case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[t]),Object(x.jsxs)("div",{className:"min-h-screen w-screen bg-primaryBg pb-24 md:pb-0",children:[Object(x.jsx)(y,{}),Object(x.jsxs)("div",{className:"grid place-content-center sm:my-16 md:my-0",children:[t?null:Object(x.jsxs)("div",{className:"h-44 my-4 space-y-2",children:[Object(x.jsxs)("div",{className:"flex space-x-4 text-xl text-navBtn",children:[Object(x.jsx)("h1",{children:"username:"}),Object(x.jsx)("p",{children:k})]}),Object(x.jsxs)("div",{className:"flex space-x-4 text-xl text-navBtn",children:[Object(x.jsx)("h1",{children:"Role:"}),Object(x.jsx)("p",{children:P?"admin":"user"})]})]}),Object(x.jsxs)("div",{className:"mb-6",children:[Object(x.jsx)("h1",{className:"text-2xl text-navBtn",children:"Your Blogs"}),Object(x.jsx)("p",{className:"text-md",children:"your public as well as private blogs are here"})]}),Object(x.jsx)("div",{className:"grid gap-5 md:gap-8 sm:grid-cols-2 lg:grid-cols-3 md:align-middle lg:gap-5",children:o?h?Object(x.jsx)("h1",{className:"p-10 text-center text-4xl text-navBtn",children:" Blog not found"}):Object(x.jsx)("h1",{className:"p-10 text-center text-4xl text-navBtn",children:"Loading, Please wait!"}):c.map((function(e,t){return Object(x.jsx)(B,{title:e.title,description:e.description,id:e._id,thumbnail:e.thumbnail},t)}))})]})]})}var I=n(22),C=n.n(I),q=n(23),E=n.n(q);function L(e){var t=Object(i.g)(),n=e.id,s=Object(a.useState)(!1),c=Object(v.a)(s,2),r=c[0],l=c[1],o=T(),d=S(),u=p(),b=function(){var e=Object(N.a)(w.a.mark((function e(){var a,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("are you sure? There's no coming back!")){e.next=3;break}return l(!1),e.abrupt("return");case 3:return e.prev=3,l(!0),e.t0=fetch,e.t1="/api/blog/".concat(n,"/"),e.next=9,o;case 9:return e.t2=e.sent,e.t3={"content-type":"application/json",authorization:e.t2},e.t4={method:"DELETE",headers:e.t3},e.next=14,(0,e.t0)(e.t1,e.t4);case 14:return a=e.sent,e.next=17,a.json();case 17:s=e.sent,200===a.status?(console.log(s),t.push("/me")):401!==a.status&&403!==a.status||(alert(s.error),l(!1)),e.next=25;break;case 21:e.prev=21,e.t5=e.catch(3),console.log(e.t5),l(!1);case 25:case"end":return e.stop()}}),e,null,[[3,21]])})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"m-auto w-full sm:w-1/2 py-2 px-4 lg:w-auto border-4 border-navBtn rounded-md",children:[Object(x.jsx)("h1",{className:"text-navBtn text-center",children:"ACTIONS"}),Object(x.jsxs)("div",{className:"flex mt-4 justify-center space-x-4",children:[d===e.userId?Object(x.jsx)("button",{disabled:r,onClick:function(){t.push("/blog/".concat(n,"/edit"))},className:"px-4 py-0.5 w-min text-center bg-navBtn rounded-md text-white border-2 border-navBtn hover:bg-secondaryBg hover:text-navBtn",children:"edit"}):null,u||d===e.userId?Object(x.jsx)("button",{disabled:r,onClick:b,className:"px-4 py-0.5 w-min text-center bg-navBtn rounded-md text-white border-2 border-navBtn hover:bg-secondaryBg hover:text-navBtn",children:"delete"}):null,Object(x.jsx)("button",{disabled:r,onClick:function(){alert("feature not available yet")},className:"px-4 py-0.5 w-min text-center bg-navBtn rounded-md text-white border-2 border-navBtn hover:bg-secondaryBg hover:text-navBtn",children:"share"})]})]})}function D(e){var t=e.match.params.id,n=Object(a.useState)(""),s=Object(v.a)(n,2),c=s[0],r=s[1],i=Object(a.useState)(""),o=Object(v.a)(i,2),d=o[0],u=o[1],b=Object(a.useState)(""),j=Object(v.a)(b,2),m=j[0],h=j[1],p=Object(a.useState)(""),O=Object(v.a)(p,2),g=O[0],f=O[1],y=Object(a.useState)(!0),B=Object(v.a)(y,2),k=B[0],S=B[1],P=Object(a.useState)(!1),I=Object(v.a)(P,2),q=I[0],D=I[1],J=T();return Object(a.useEffect)((function(){(function(){var e=Object(N.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=fetch,e.t1="/api/blog/".concat(t),e.next=4,J;case 4:e.t2=e.sent,e.t3={authorization:e.t2},e.t4={method:"GET",headers:e.t3},(0,e.t0)(e.t1,e.t4).then((function(e){return e.json()})).then((function(e){if(e.success){r(e.blog.title),u(e.blog.description);var t=C()(e.blog.content),n=E.a.sanitize(t);h(n),f(e.blog.userId),S(!1)}else D(!0)}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(x.jsxs)("div",{className:"min-h-screen bg-secondaryBg",children:[Object(x.jsx)("div",{className:"p-8",children:Object(x.jsxs)(l.b,{className:"flex align-middle justify-center rounded-sm w-min px-2 border-2 border-navBtn text-navBtn",to:"/blogs",children:[" ",Object(x.jsx)("div",{className:"w-5 mr-2 my-auto",children:Object(x.jsx)("img",{className:"w-full",src:"/back.png",alt:"back"})})," back"]})}),k?q?Object(x.jsx)("h1",{className:"p-10 text-center text-4xl text-navBtn",children:" Blog not found"}):Object(x.jsx)("h1",{className:"p-10 text-center text-4xl text-navBtn",children:"Loading, Please wait!"}):Object(x.jsxs)("div",{id:"blog",className:"lg:flex p-2",children:[Object(x.jsxs)("div",{id:"main",className:"h-auto w-100 lg:w-2/3 py-2 px-4 lg:h-auto min-h-full overflow-hidden",children:[Object(x.jsx)("h1",{className:"text-2xl min-h-96 text-center underline text-white",children:c}),Object(x.jsx)("p",{className:"text-gray-200 border-l-2 my-6 pl-4",children:d}),Object(x.jsx)("iframe",{className:"h-96 w-full",title:"markdown",id:"markdown",srcDoc:m})]}),Object(x.jsx)("div",{id:"menu",className:"h-auto w-100 lg:h-auto lg:w-1/3 min-h-full mt-8 lg:mt-0 sm:px-6 md:space-y-4 lg:block flex space-x-4",children:Object(x.jsx)(L,{userId:g,id:t})})]})]})}function J(){var e=Object(i.g)(),t=Object(a.useState)(""),n=Object(v.a)(t,2),s=n[0],c=n[1],r=Object(a.useState)(""),o=Object(v.a)(r,2),d=o[0],u=o[1],b=Object(a.useState)(""),j=Object(v.a)(b,2),m=j[0],h=j[1],p=Object(a.useState)("https://via.placeholder.com/600x150?text=edit this"),O=Object(v.a)(p,2),g=O[0],f=O[1],y=Object(a.useState)(!0),B=Object(v.a)(y,2),k=B[0],S=B[1],P=Object(a.useState)(!1),I=Object(v.a)(P,2),C=I[0],q=I[1],E=T(),L=function(){var t=Object(N.a)(w.a.mark((function t(n){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),q(!0),t.t0=fetch,t.next=5,E;case 5:t.t1=t.sent,t.t2={"content-type":"application/json",authorization:t.t1},t.t3=JSON.stringify({title:s,description:d,content:m,isPublic:k,thumbnail:g}),t.t4={method:"POST",headers:t.t2,body:t.t3},(0,t.t0)("/api/post",t.t4).then((function(e){return e.json()})).then((function(t){if(t.success){var n=t.blog[0]._id;e.push("/blog/".concat(n))}else alert(t.error)}));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"min-h-screen  px-4 pb-8  bg-primaryBg grid place-content-center",children:[Object(x.jsx)("div",{className:"py-8 px-3 md:px-10",children:Object(x.jsxs)(l.b,{className:"flex align-middle justify-center rounded-sm w-min px-2 border-2 border-navBtn text-navBtn",to:"/blogs",children:[" ",Object(x.jsx)("div",{className:"w-5 mr-2 my-auto",children:Object(x.jsx)("img",{className:"w-full",src:"/back.png",alt:"back"})})," back"]})}),Object(x.jsxs)("form",{onSubmit:L,method:"POST",action:"/api/post",className:"w-screen px-3 md:px-10 m-auto space-y-4",children:[Object(x.jsx)("img",{className:"w-full",src:g,alt:"thumbnail"}),Object(x.jsx)("h1",{className:"text-3xl text-navBtn",children:"Post"}),Object(x.jsx)("input",{value:s,onChange:function(e){return c(e.target.value)},className:"w-full p-2",type:"text",name:"title",placeholder:"title",required:!0}),Object(x.jsxs)("div",{children:[Object(x.jsx)("input",{placeholder:"thumbnail image",type:"url",value:g,onChange:function(e){return f(e.target.value)},className:"w-full p-2"}),Object(x.jsx)("p",{className:"text-xs text-gray-500",children:"URL to thumbnail image for your blog"})]}),Object(x.jsxs)("div",{className:"w-56 flex justify-between align-baseline",children:[Object(x.jsx)("label",{htmlFor:"isPublic",children:"publicily visible"}),Object(x.jsx)("input",{id:"isPublic",type:"checkbox",defaultChecked:k,onChange:function(e){return S(e.target.checked)}})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("textarea",{value:d,onChange:function(e){return u(e.target.value)},className:"w-full h-32 p-2",name:"description",placeholder:"description",required:!0}),Object(x.jsx)("p",{className:"text-xs text-gray-500",children:"Doesn't support markdown"})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("textarea",{value:m,onChange:function(e){return h(e.target.value)},className:"w-full h-72 p-2",name:"content",placeholder:"blog goes here",required:!0}),Object(x.jsx)("p",{className:"text-xs text-gray-500",children:"This section support some elements of markdown."})]}),Object(x.jsx)("button",{disabled:C,type:"submit",className:"w-min px-3 py-0.5 border-2 border-navBtn rounded-sm hover:bg-navBtn hover:text-white",children:"post"})]})]})}function z(){var e=Object(a.useState)([]),t=Object(v.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(!0),r=Object(v.a)(c,2),i=r[0],o=r[1];return Object(a.useEffect)((function(){fetch("/api/blogs").then((function(e){return e.json()})).then((function(e){e.success&&(s(e.blogs),o(!1))}))}),[]),Object(x.jsxs)("div",{className:"md:min-h-screen w-screen bg-primaryBg pb-24 md:pb-0",children:[Object(x.jsx)("div",{className:"p-4",children:Object(x.jsxs)(l.b,{className:"flex align-middle justify-center rounded-sm w-min px-2 border-2 border-navBtn text-navBtn",to:"/",children:[" ",Object(x.jsx)("div",{className:"w-5 mr-2 my-auto",children:Object(x.jsx)("img",{className:"w-full",src:"/back.png",alt:"back"})})," back"]})}),Object(x.jsx)("div",{className:"grid place-content-center min-h-screen my-16 md:my-0",children:Object(x.jsx)("div",{className:"grid gap-5 md:gap-8 sm:grid-cols-2 lg:grid-cols-3 md:align-middle lg:gap-5",children:i?Object(x.jsx)("h1",{className:"text-navBtn text-2xl text-center",children:"please wait"}):n.map((function(e,t){return Object(x.jsx)(B,{title:e.title,description:e.description,id:e._id,thumbnail:e.thumbnail},t)}))})})]})}function R(e){var t=e.match.params.id,n=Object(i.g)(),s=Object(a.useState)(""),c=Object(v.a)(s,2),r=c[0],o=c[1],d=Object(a.useState)(""),u=Object(v.a)(d,2),b=u[0],j=u[1],m=Object(a.useState)(""),h=Object(v.a)(m,2),p=h[0],O=h[1],g=Object(a.useState)(""),f=Object(v.a)(g,2),y=f[0],B=f[1],k=Object(a.useState)(!0),S=Object(v.a)(k,2),P=S[0],I=S[1],C=Object(a.useState)(!0),q=Object(v.a)(C,2),E=q[0],L=q[1],D=Object(a.useState)(!1),J=Object(v.a)(D,2),z=J[0],R=J[1],_=T();Object(a.useEffect)((function(){(function(){var e=Object(N.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=fetch,e.t1="/api/blog/".concat(t),e.next=4,_;case 4:e.t2=e.sent,e.t3={authorization:e.t2},e.t4={method:"GET",headers:e.t3},(0,e.t0)(e.t1,e.t4).then((function(e){return e.json()})).then((function(e){e.success?(L(!1),o(e.blog.title),j(e.blog.description),O(e.blog.content),I(e.blog.isPublic),e.blog.thumbnail?B(e.blog.thumbnail):B("https://via.placeholder.com/600x200?text=edit this")):R(!0)}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]);var F=function(){var e=Object(N.a)(w.a.mark((function e(a){var s,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(!0),a.preventDefault(),e.prev=2,e.t0=fetch,e.t1="/api/blog/".concat(t),e.next=7,_;case 7:return e.t2=e.sent,e.t3={"content-type":"application/json",authorization:e.t2},e.t4=JSON.stringify({title:r,description:b,content:p,isPublic:P,thumbnail:y}),e.t5={method:"PATCH",headers:e.t3,body:e.t4},e.next=13,(0,e.t0)(e.t1,e.t5);case 13:return s=e.sent,e.next=16,s.json();case 16:c=e.sent,200===s.status?n.push("/blog/".concat(t)):401!==s.status&&403!==s.status||(alert(c.error),L(!1)),e.next=24;break;case 20:e.prev=20,e.t6=e.catch(2),console.log(e.t6),L(!1);case 24:case"end":return e.stop()}}),e,null,[[2,20]])})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"min-h-screen px-4 pb-8 bg-primaryBg grid place-content-center",children:[Object(x.jsx)("div",{className:"py-8 px-3 md:px-10",children:Object(x.jsxs)(l.b,{"aria-disabled":E,className:"flex align-middle justify-center rounded-sm w-min px-2 border-2 border-navBtn text-navBtn",to:z?"/":"/blog/".concat(t),children:[" ",Object(x.jsx)("div",{className:"w-5 mr-2 my-auto",children:Object(x.jsx)("img",{className:"w-full",src:"/back.png",alt:"back"})})," back"]})}),E?z?Object(x.jsx)("h1",{className:"p-10 text-center text-4xl text-navBtn",children:" Blog not found"}):Object(x.jsx)("h1",{className:"p-10 text-center text-4xl text-navBtn",children:"Loading, Please wait!"}):Object(x.jsxs)("form",{onSubmit:F,method:"POST",action:"/api/post",className:"w-screen px-3 md:px-10 m-auto space-y-4",children:[Object(x.jsx)("img",{className:"w-full",src:y,alt:"thumbnail"}),Object(x.jsx)("h1",{className:"text-3xl text-navBtn",children:"Edit"}),Object(x.jsx)("input",{value:r,onChange:function(e){return o(e.target.value)},className:"w-full p-2",type:"text",name:"title",placeholder:"title",required:!0}),Object(x.jsxs)("div",{children:[Object(x.jsx)("input",{placeholder:"thumbnail image",type:"url",value:y,onChange:function(e){return B(e.target.value)},className:"w-full p-2"}),Object(x.jsx)("p",{className:"text-xs text-gray-500",children:"URL to thumbnail image for your blog"})]}),Object(x.jsxs)("div",{className:"w-56 flex justify-between align-baseline",children:[Object(x.jsx)("label",{htmlFor:"isPublic",children:"publicily visible"}),Object(x.jsx)("input",{id:"isPublic",type:"checkbox",defaultChecked:P,onChange:function(e){return I(e.target.checked)}})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("textarea",{value:b,onChange:function(e){return j(e.target.value)},className:"w-full h-32 p-2",name:"description",placeholder:"description",required:!0}),Object(x.jsx)("p",{className:"text-xs text-gray-500",children:"Doesn't support markdown"})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("textarea",{value:p,onChange:function(e){return O(e.target.value)},className:"w-full h-72 p-2",name:"content",placeholder:"blog goes here",required:!0}),Object(x.jsx)("p",{className:"text-xs text-gray-500",children:"This section support some elements of markdown."})]}),Object(x.jsx)("button",{disabled:E,type:"submit",className:"w-min px-3 py-0.5 border-2 border-navBtn rounded-sm hover:bg-navBtn hover:text-white",children:"update"})]})]})}function _(){var e=Object(i.g)(),t=function(){var t=Object(N.a)(w.a.mark((function t(n){var a,s,c,r;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a=n.target.username.value,s=n.target.password.value,t.prev=3,t.next=6,fetch(n.target.action,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:a,password:s})});case 6:return c=t.sent,t.next=9,c.json();case 9:r=t.sent,200===c.status?(localStorage.setItem("authToken",r.authToken),localStorage.setItem("refreshToken",r.refreshToken),e.push("/")):alert(r.error),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[3,13]])})));return function(e){return t.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"min-h-screen  px-4 pb-8  bg-primaryBg grid place-content-center",children:[Object(x.jsx)("div",{className:"py-8 px-3 md:px-10",children:Object(x.jsxs)(l.b,{className:"flex align-middle justify-center rounded-sm w-min px-2 border-2 border-navBtn text-navBtn",to:"/",children:[" ",Object(x.jsx)("div",{className:"w-5 mr-2 my-auto",children:Object(x.jsx)("img",{className:"w-full",src:"/back.png",alt:"back"})})," back"]})}),Object(x.jsxs)("form",{onSubmit:t,method:"POST",action:"/auth/login",className:"md:w-96 m-auto space-y-4 px-3 md:px-10",children:[Object(x.jsx)("h1",{className:"text-2xl text-navBtn",children:"Login"}),Object(x.jsxs)("div",{children:[Object(x.jsx)("input",{className:"w-full p-2",type:"text",name:"username",placeholder:"username",required:!0}),Object(x.jsx)("p",{className:"text-xs text-gray-500",children:"username must be unique"})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("input",{type:"password",className:"w-full p-2",name:"password",placeholder:"password",required:!0}),Object(x.jsx)("p",{className:"text-xs text-gray-500",children:"make sure to choose a strong password"})]}),Object(x.jsxs)("div",{className:"flex justify-between align-middle",children:[Object(x.jsx)("button",{type:"submit",className:"w-26 text-center px-3 py-0.5 border-2 border-navBtn rounded-sm hover:bg-navBtn hover:text-white",children:"log in"}),Object(x.jsx)(l.b,{to:"/signup",children:"create account"})]})]})]})}function F(){var e=Object(i.g)(),t=function(){var t=Object(N.a)(w.a.mark((function t(n){var a,s,c,r,l;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a=n.target.username.value,s=n.target.password.value,c=n.target.confPassword.value,t.prev=4,t.next=7,fetch(n.target.action,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:a,password:s,confPassword:c})});case 7:if(201!==(r=t.sent).status){t.next=12;break}e.push("/login"),t.next=17;break;case 12:if(401!==r.status){t.next=17;break}return t.next=15,r.json();case 15:l=t.sent,alert(l.error);case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(4),alert(t.t0);case 22:case"end":return t.stop()}}),t,null,[[4,19]])})));return function(e){return t.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"min-h-screen  px-4 pb-8  bg-primaryBg grid place-content-center",children:[Object(x.jsx)("div",{className:"py-8 px-3 md:px-10",children:Object(x.jsxs)(l.b,{className:"flex align-middle justify-center rounded-sm w-min px-2 border-2 border-navBtn text-navBtn",to:"/",children:[" ",Object(x.jsx)("div",{className:"w-5 mr-2 my-auto",children:Object(x.jsx)("img",{className:"w-full",src:"/back.png",alt:"back"})})," back"]})}),Object(x.jsxs)("form",{onSubmit:t,method:"POST",action:"/auth/signup",className:"md:w-96 m-auto space-y-4 px-3 md:px-10",children:[Object(x.jsx)("h1",{className:"text-2xl text-navBtn",children:"Signup"}),Object(x.jsxs)("div",{children:[Object(x.jsx)("input",{className:"w-full p-2",type:"text",name:"username",placeholder:"username",required:!0}),Object(x.jsx)("p",{className:"text-xs text-gray-500",children:"username must be unique"})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("input",{type:"password",className:"w-full p-2",name:"password",placeholder:"password",required:!0}),Object(x.jsx)("p",{className:"text-xs text-gray-500",children:"make sure to choose a strong password"})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("input",{type:"password",className:"w-full p-2",name:"confPassword",placeholder:"password",required:!0}),Object(x.jsx)("p",{className:"text-xs text-gray-500",children:"re-enter the password"})]}),Object(x.jsx)("button",{type:"submit",className:"w-26 text-center px-3 py-0.5 border-2 border-navBtn rounded-sm hover:bg-navBtn hover:text-white",children:"sign up"})]})]})}function A(){return Object(x.jsxs)("div",{className:"min-h-screen bg-primaryBg",children:[Object(x.jsx)(y,{}),Object(x.jsxs)("div",{className:"py-20 px-5",children:[Object(x.jsx)("h1",{className:"text-center text-2xl text-navBtn",children:"This app is all about learning."}),Object(x.jsxs)("div",{className:"py-4 text-center text-md font-mono",children:[Object(x.jsx)("p",{children:"currently JWT and how to implement it!"}),Object(x.jsx)("p",{children:"Also React and user persistence via JWT on client-side"})]})]})]})}function U(e){return Object(x.jsxs)("div",{className:"w-60 overflow-hidden rounded-md m-auto",children:[Object(x.jsx)("div",{className:"w-full bg-white",children:Object(x.jsx)("img",{className:"h-28 m-auto",src:e.thumbnail,alt:"img"})}),Object(x.jsxs)("div",{className:"px-3 py-2 bg-purpleBg text-white",children:[Object(x.jsxs)("p",{className:"text-xs text-justify h-6 overflow-ellipsis overflow-hidden",children:["username: ",e.username]}),Object(x.jsxs)("p",{className:"text-xs text-justify h-6 overflow-ellipsis overflow-hidden",children:["role: ",e.role]}),Object(x.jsxs)(l.b,{className:"flex align-middle justify-center px-2 text-xs border border-white w-24 rounded-sm",to:"/user/".concat(e.id),children:[Object(x.jsx)("span",{className:"mr-1",children:"open user"})," ",Object(x.jsx)("img",{width:"10px",height:"10px",src:"/ext-link.svg",alt:"external link"})]})]})]})}function G(){var e=Object(a.useState)([]),t=Object(v.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(!0),r=Object(v.a)(c,2),l=r[0],i=r[1],o=Object(a.useState)(!1),d=Object(v.a)(o,2),u=d[0],b=d[1],j=T();return Object(a.useEffect)((function(){(function(){var e=Object(N.a)(w.a.mark((function e(){var t,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=fetch,e.next=3,j;case 3:return e.t1=e.sent,e.t2={authorization:e.t1},e.t3={headers:e.t2},e.next=8,(0,e.t0)("/auth/users",e.t3);case 8:return t=e.sent,e.next=11,t.json();case 11:n=e.sent,200===t.status?n.success?n.users.length>0?(s(n.users),i(!1)):b(!0):(b(!0),alert(n.error)):(console.log(n),alert(n.error));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(x.jsxs)("div",{className:"min-h-screen w-screen bg-primaryBg pb-24 md:pb-0",children:[Object(x.jsx)(y,{}),Object(x.jsxs)("div",{className:"grid place-content-center sm:my-16 md:my-0",children:[Object(x.jsxs)("div",{className:"my-6 px-4",children:[Object(x.jsx)("h1",{className:"text-2xl text-navBtn",children:"List of all Users"}),Object(x.jsx)("p",{className:"text-md",children:"you can visit each user's profile and view their public or private posts."})]}),Object(x.jsx)("div",{className:"grid gap-5 md:gap-8 sm:grid-cols-2 lg:grid-cols-3 md:align-middle lg:gap-5",children:l?u?Object(x.jsx)("h1",{className:"p-10 text-center text-4xl text-navBtn",children:"no users found"}):Object(x.jsx)("h1",{className:"p-10 text-center text-4xl text-navBtn",children:"Loading, Please wait!"}):n.map((function(e,t){return Object(x.jsx)(U,{username:e.username,role:e.role,id:e._id,thumbnail:"https://via.placeholder.com/600x200?text=".concat(e.username)},t)}))})]})]})}var H=function(){return Object(x.jsx)("div",{className:"container min-h-scree min-w-full",children:Object(x.jsx)(l.a,{children:Object(x.jsxs)(i.d,{children:[Object(x.jsx)(i.b,{exact:!0,path:"/",component:k}),Object(x.jsx)(i.b,{exact:!0,path:"/login",component:_}),Object(x.jsx)(i.b,{exact:!0,path:"/signup",component:F}),Object(x.jsx)(i.b,{exact:!0,path:"/blogs",component:z}),Object(x.jsx)(i.b,{exact:!0,path:"/about",component:A}),Object(x.jsx)(h,{exact:!0,path:"/me",component:P}),Object(x.jsx)(h,{exact:!0,path:"/post",component:J}),Object(x.jsx)(h,{exact:!0,path:"/blog/:id",component:D}),Object(x.jsx)(h,{exact:!0,path:"/blog/:id/edit",component:R}),Object(x.jsx)(g,{exact:!0,path:"/admin",component:G}),Object(x.jsx)(g,{exact:!0,path:"/user/:id",component:P})]})})})};r.a.render(Object(x.jsx)(s.a.StrictMode,{children:Object(x.jsx)(H,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.ad160ebe.chunk.js.map